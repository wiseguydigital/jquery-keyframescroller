/**
 * keyframescroller.js v1.0
 * https://github.com/wiseguydigital/jquery-keyframescroller
 * Copyright (c) 2012, Wiseguy Digital Ltd. All rights reserved. 
 * Licensed under the MIT license.
*/
(function(a){a.keyframescroller=function(d){var c,f,h,b,e;keyframescroller=this;h=0;f={debug:false,orientation:"horizontal",totalKeyframes:10,keyframeScrollEle:a("#keyframeScroll"),trackEle:a("#keyframeScroll-track"),carriageEle:a("#keyframeScroll-carriage"),};keyframescroller.settings=a.extend({},f,d);function g(){keyframescroller.curKeyframe=0;keyframescroller.trackWidth=keyframescroller.settings.trackEle.outerWidth();keyframescroller.carriageWidth=keyframescroller.settings.carriageEle.outerWidth();if(keyframescroller.settings.debug){this.addDebugHtml()}keyframescroller.resize();a(window).resize(function(){keyframescroller.resize()});a(keyframescroller.settings.keyframeScrollEle).bind("keyframechanged",function(i,j){});a(keyframescroller.settings.carriageEle).draggable({axis:"x",containment:"parent",drag:function(){keyframescroller.calculateCurKeyFrame()},stop:function(){keyframescroller.correctCarriagePos()}});this.keyboardNav();a("section").swipe({swipe:keyframescroller.swipeNav,threshold:0,allowPageScroll:"auto"});a(keyframescroller.settings.keyframeScrollEle).trigger("keyframechanged",0)}keyframescroller.calculateCurKeyFrame=function(){var n,m,l,o,i,k,j;n=keyframescroller.settings.keyframeScrollEle;m=keyframescroller.settings.trackEle;l=keyframescroller.settings.carriageEle;o=a(l).offset();i=(o.left/(keyframescroller.trackWidth-keyframescroller.carriageWidth));k=keyframescroller.curKeyframe;j=Math.round(i*keyframescroller.settings.totalKeyframes);if(k!==j){keyframescroller.setCurKeyFrame(j);a(n).trigger("keyframechanged",[j])}};keyframescroller.correctCarriagePos=function(){var k,i,j;k=keyframescroller.settings.trackEle;i=keyframescroller.settings.carriageEle;j=(keyframescroller.trackWidth/keyframescroller.settings.totalKeyframes)*keyframescroller.curKeyframe;a(i).animate({left:j},300)};keyframescroller.setCurKeyFrame=function(i){keyframescroller.curKeyframe=i};keyframescroller.resize=function(){var k,j,i,l;k=this.settings.keyframeScrollEle;j=this.settings.trackEle;i=this.settings.carriageEle;l=this.settings.totalKeyframes;this.trackWidth=a(j).outerWidth();a(i).css({width:(this.trackWidth/l)});this.carriageWidth=a(i).outerWidth()};keyframescroller.swipeNav=function(i,j){var k;switch(j){case"down":if(keyframescroller.settings.orientation=="horizontal"){return}if(keyframescroller.curKeyframe==keyframescroller.settings.totalKeyframes-1){return}k=keyframescroller.curKeyframe+1;break;case"up":if(keyframescroller.settings.orientation=="horizontal"){return}if(keyframescroller.curKeyframe==0){return}k=keyframescroller.curKeyframe-1;break;case"right":if(keyframescroller.settings.orientation=="vertical"){return}if(keyframescroller.curKeyframe==0){return}k=keyframescroller.curKeyframe-1;break;case"left":if(keyframescroller.settings.orientation=="vertical"){return}if(keyframescroller.curKeyframe==keyframeScroll.settings.totalKeyframes-1){return}k=keyframescroller.curKeyframe+1;break}keyframescroller.setCurKeyFrame(k);a(keyframescroller.settings.keyframeScrollEle).trigger("keyframechanged",k);keyframescroller.correctCarriagePos()};addDebugHtml=function(){a("body").prepend('<div id="keyframeScroll-debug"><p id="keyframeScroll-debug-total-keyframes">Total keyframes: <span></span></p><p id="keyframeScroll-debug-current-keyframe">Current keyframe: <span></span></p></div>')};keyboardNav=function(){var i;a(document).keydown(function(j){switch(j.which){case 40:if(keyframescroller.settings.orientation=="horizontal"){return}if(keyframescroller.curKeyframe==keyframescroller.settings.totalKeyframes-1){return}i=keyframeScroll.curKeyframe+1;break;case 38:if(keyframescroller.settings.orientation=="horizontal"){return}if(keyframescroller.curKeyframe==0){return}i=keyframescroller.curKeyframe-1;break;case 37:if(keyframescroller.settings.orientation=="vertical"){return}if(keyframescroller.curKeyframe==0){return}i=keyframescroller.curKeyframe-1;break;case 39:if(keyframescroller.settings.orientation=="vertical"){return}if(keyframescroller.curKeyframe==keyframescroller.settings.totalKeyframes-1){return}i=keyframescroller.curKeyframe+1;break}keyframescroller.setCurKeyFrame(i);a(keyframescroller.settings.keyframeScrollEle).trigger("keyframechanged",i);keyframescroller.correctCarriagePos()})};g();return keyframescroller}})(jQuery);